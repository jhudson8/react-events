/*!
 * [react-events](https://github.com/jhudson8/react-events) v0.7.2;  MIT license; Joe Hudson<joehud_AT_gmail.com>
 */
!function(t){"function"==typeof define&&define.amd?define([],function(){return t}):"undefined"!=typeof exports&&"undefined"!=typeof require?module.exports=t:t(React)}(function(t){function n(t,e,i){e=e||{},i?i+=":":i="";var a,r;for(var o in t)a=t[o],r=typeof a,"string"===r||"function"===r?e[i+o]=a:a&&n(a,e,i+o);return e}function e(n,e){var i={type:n};for(var a in e)i[a]=e[a];var o=t.mixins.getState("__watchedEvents",this);o||(o=[],v({__watchedEvents:o},this)),i.context=i.context||this,o.push(i);var f=r(i.target,this);if(this.isMounted()&&f&&f[i.type](i.event,i.callback,i.context),"off"===n)for(var c,l=0;l<o.length;l++)c=o[l],c.event===e.event&&c.callback===e.callback&&r(c.target,this)===f&&o.splice(l,1)}function i(t){var n=d("__watchedEvents",t);if(n){var e;for(var i in n){e=n[i];var a=r(e.target,t);a&&a[e.type](e.event,e.callback,e.context)}}}function a(t,n){var e=d("__watchedEvents",n);if(e){var i;for(var a in e){i=e[a];var o=r(i.target,n);o&&o.off(i.event,i.callback,i.context)}t||v({__watchedEvents:[]},n)}}function r(t,n){return"function"==typeof t?t.call(n):t}function o(n,e,i,a){if(!a){var r,f=e;if("object"==typeof e&&(f=e.callback.call(this)),"string"==typeof e&&(r=h.indexOf(e)>=0,f=i[e]),!f)throw'no callback function exists for "'+e+'"';e=function(){return f.apply(i,r?[]:arguments)}}var v=n.match(u);if(v){var d=v[1],p=v[2].split(/\s*,\s*/),g=v[3],m=t.events.specials[d];if(m)return 1===p.length&&""===p[0]&&(p=[]),e=m.call(i,e,p),o(g,e,i,!0);throw new Error('invalid special event handler "'+d+"'")}var y=n.match(s),x=y[1];path=y[2],handler=c[x];for(var _=0;!handler&&_<l.length;_++)x.match(l[_].pattern)&&(handler=l[_].handler);if(!handler)throw'no handler registered for "'+n+'"';return handler.call(i,{key:x,path:path},e)}function f(t,n){g.handle(t,function(t,e){var i,a,r=t.path.match(s),o=r[1],f=r[2];return{on:function(){var t=n.call(this,o);t&&(a=t.state||t,t.on(f,e),i=t)},off:function(){i&&(i.off(f,e),i=void 0,a=void 0)},isStale:function(){if(!i)return!!t;var t=n.call(this,o);return t&&(t.state||t)===a?void 0:!0}}})}var c={},l=[],s=/^([^:]+):?(.*)/,u=/^\*([^\(]+)\(([^)]*)\):(.*)/,h=["forceUpdate"],v=t.mixins.setState,d=t.mixins.getState,p={standard:function(t){var n={on:t.onKey||"on",off:t.offKey||"off"},e=t.target;return function(i,a){function r(t,i){return function(){var r="function"==typeof e?e.call(i,o):e;r&&r[n[t]](o,a)}}var o=i.path;return{on:r("on",this),off:r("off",this),initialize:t.initialize}}}},g=t.events={specials:{},handle:function(t,n){"function"!=typeof n&&(n=p[n.type||"standard"](n)),t instanceof RegExp?l.push({pattern:t,handler:n}):c[t]=n}};"undefined"!=typeof window&&g.handle("window",{target:window,onKey:"addEventListener",offKey:"removeEventListener"});var m={ref:function(t){return this.refs[t]},prop:function(t){return this.props[t]}};for(var y in m)f(y,m[y]);g.handle("repeat",function(t,n){var e,i=parseInt(t.path,10);return{on:function(){e=setInterval(n,i)},off:function(){e=!!clearInterval(e)}}}),g.handle("!repeat",function(t,n){function e(t){t!==!0&&n(),setTimeout(function(){i&&requestAnimationFrame(e)},a)}var i,a=parseInt(t.path,10);return{on:function(){i=!0,e(!0)},off:function(){i=!1}}}),t.mixins.add("events",function(){function t(t,n){return function(){t.apply(n,arguments)}}var e=[{triggerWith:function(){var t=Array.prototype.slice.call(arguments),n=this;return function(){n.trigger.apply(this,t)}},getInitialState:function(){var t=[];if(this.events){var e,i=n(this.events);for(var a in i)e=o(a,i[a],this),e.initialize&&e.initialize.call(this),t.push(e)}return{_eventHandlers:t}},componentDidUpdate:function(){for(var t,n=d("_eventHandlers",this),e=0;e<n.length;e++)t=n[e],t.isStale&&t.isStale.call(this)&&(t.off.call(this),t.on.call(this))},componentDidMount:function(){for(var t=d("_eventHandlers",this),n=0;n<t.length;n++)t[n].on.call(this)},componentWillUnmount:function(){for(var t=d("_eventHandlers",this),n=0;n<t.length;n++)t[n].off.call(this)}}];if(g.mixin){var i={},a={};for(var r in g.mixin)i[r]=t(g.mixin[r],a);i.getInitialState=function(){return{__events:a}},e.push(i)}return e},"state"),t.mixins.add("listen",{componentDidMount:function(){a(!0,this),i(this)},componentWillUnmount:function(){a(!0,this)},listenTo:function(t,n,i,a){var r=n?{event:n,callback:i,target:t,context:a}:t;e.call(this,"on",r)},listenToOnce:function(t,n,i,a){var r={event:n,callback:i,target:t,context:a};e.call(this,"once",r)},stopListening:function(t,n,i,a){var r={event:n,callback:i,target:t,context:a};e.call(this,"off",r)}})});