/*!
 * [react-events](https://github.com/jhudson8/react-events) v0.5.1;  MIT license; Joe Hudson<joehud_AT_gmail.com>
 */
!function(n){"function"==typeof define&&define.amd?define(["react"],function(t){n(t,$)}):"undefined"!=typeof exports&&"undefined"!=typeof require?module.exports=function(t,e){n(t,e)}:n(React,$)}(function(n,t){function e(t,l,s,c){if(!c){var u,h=l;if("object"==typeof l&&(h=l.callback.call(this)),"string"==typeof l&&(u=f.indexOf(l)>=0,h=s[l]),!h)throw'no callback function exists for "'+l+'"';l=function(){return h.apply(s,u?[]:arguments)}}var d=t.match(o);if(d){var p=d[1],v=d[2].split(/\s*,\s*/),m=d[3],g=n.events.specials[p];if(g)return 1===v.length&&""===v[0]&&(v=[]),l=g.call(s,l,v),e(m,l,s,!0);throw new Error('invalid special event handler "'+p+"'")}var y=t.match(a),w=y[1];path=y[2],handler=i[w];for(var x=0;!handler&&x<r.length;x++)w.match(r[x].pattern)&&(handler=r[x].handler);if(!handler)throw'no handler registered for "'+t+'"';return handler.call(s,{key:w,path:path},l)}var i={},r=[],a=/^([^:]+):?(.*)/,o=/^\*([^\(]+)\(([^)]*)\):(.*)/,f=["forceUpdate"],l={standard:function(n){var t={on:n.onKey||"on",off:n.offKey||"off"},e=n.target;return function(i,r){function a(n,i){return function(){var a="function"==typeof e?e.call(i,o):e;a&&a[t[n]](o,r)}}var o=i.path;return{on:a("on",this),off:a("off",this),initialize:n.initialize}}}},s=n.events={specials:{},handle:function(n,t){"function"!=typeof t&&(t=l[t.type||"standard"](t)),n instanceof RegExp?r.push({pattern:n,handler:t}):i[n]=t}};"undefined"!=typeof window&&s.handle("window",{target:window,onKey:"addEventListener",offKey:"removeEventListener"}),s.handle("ref",function(n,t){var e,i,r=n.path.match(a),o=r[1],f=r[2];return{on:function(){var n=this.refs[o];n&&(i=n.state||n,n.on(f,t),e=n)},off:function(){e&&(e.off(f,t),e=void 0,i=void 0)},isStale:function(){if(!e)return!!this.refs[o];var n=this.refs[o];return n&&(n.state||n)===i?void 0:!0}}}),s.handle("dom",function(n,e){var i=n.path.match(a);return{on:function(){t(this.getDOMNode()).on(i[1],i[2],e)},off:function(){t(this.getDOMNode()).off(i[1],i[2],e)}}}),s.handle("repeat",function(n,t){var e,i=parseInt(n.path,10);return{on:function(){e=setInterval(t,i)},off:function(){e=!!clearInterval(e)}}}),s.handle("!repeat",function(n,t){function e(n){n!==!0&&t(),setTimeout(function(){i&&requestAnimationFrame(e)},r)}var i,r=parseInt(n.path,10);return{on:function(){i=!0,e(!0)},off:function(){i=!1}}}),n.mixins.add("events",function(){function n(n,t){return function(){n.apply(t,arguments)}}var t=[{triggerWith:function(){var n=Array.prototype.slice.call(arguments),t=this;return function(){t.trigger.apply(this,n)}},getInitialState:function(){var n=this._eventHandlers=[];if(this.events){var t;for(var i in this.events)t=e(i,this.events[i],this),t.initialize&&t.initialize.call(this),n.push(t)}return null},componentDidUpdate:function(){for(var n,t=this._eventHandlers,e=0;e<t.length;e++)n=t[e],n.isStale&&n.isStale.call(this)&&(n.off.call(this),n.on.call(this))},componentDidMount:function(){for(var n=this._eventHandlers,t=0;t<n.length;t++)n[t].on.call(this)},componentWillUnmount:function(){for(var n=this._eventHandlers,t=0;t<n.length;t++)n[t].off.call(this)}}];if(s.mixin){var i={},r={};for(var a in s.mixin)i[a]=n(s.mixin[a],r);i.getInitialState=function(){return{__events:r}},t.push(i)}return t})});